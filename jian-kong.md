## 监控

| AWS | PEST |
| :--- | :--- |
| [Amazon CloudWatch](amazon-cloudwatch.md) 是AWS提供的监控服务，该服务集成到了[AWS CodeBuild](aws-codebuild.md)里，在 Code Build控制台可以看到构建任务的指标，以及构建日志信息。 | PSET的监控分两部分一个是Monitor对PSET各个模块本身的监控，一个是集成到了MAM能够监控构建日志信息，和应用构建的健康状况、构建数量等指标。 |

# AWS
AWS的监控是AWS CloudWatch提供服务，下图是监控的控制面板，菜单栏分了CloudWatch、控制面板、警报、事件按、日志、指标四个菜单、除了CloudWatch和控制面板外每个菜单下有各自的子菜单。
![](/assets/2019-02-22_105616.png)
## CloudWatch
Cloud Watch是一个监控仪表盘，汇总了许多监控的信息，AWS服务状态以及不同服务提供的信息、警报信息、日志信息、构建成功或者失败的信息、CPU负载和IO信息。
![](/assets/2019-02-22_110007.png)

同时在每个服务都有自己的控制面板，如下是日志存储的控制面板信息
![](/assets/2019-02-22_112654.png)

如下是CodeBuild的控制面板信息
![](/assets/2019-02-22_112758.png)

如下是EC2的控制面板信息。
![](/assets/2019-02-22_112445.png)

如下是查看EBS服务的控制面板，展现的信息更多。
![](/assets/2019-02-22_112128.png)

如下是S3的控制面板信息
![](/assets/2019-02-22_112411.png)

## 控制面板
AWS用户可以根据自己的需要创建控制面板
![](/assets/2019-02-22_113032.png)

输入控制面板名称后，选择添加小部件。
![](/assets/2019-02-22_113145.png)

然后在选择监控的指标。
![](/assets/2019-02-22_113427.png)

如此一个用户自定义的监控面板创建好了。
![](/assets/2019-02-22_115932.png)

## 警报
用户可以创建一个 CloudWatch 警报来监视单个 CloudWatch 指标，或基于 CloudWatch 指标监视数学表达式的结果。警报根据指标或表达式在多个时间段内相对于某阈值的值执行一项或多项操作。该操作可以是 Amazon EC2 操作、Amazon EC2 Auto Scaling 操作或发送到 Amazon SNS 主题的通知。

您也可以向 CloudWatch 控制面板添加警报，并以可视化方式监控它们。当某个警报位于控制面板上时，如果它处于 ALARM 状态，则会变成红色，便于您主动监控其状态。

警报仅在出现持续状态变化时才会调用操作。CloudWatch 警报将不会仅因为其处于特定状态而调用操作；该状态必须已改变并在指定的若干个时间段内保持不变。

因为状态改变而导致警报调用操作后，其后续行为取决于您关联到警报的操作类型。对于 Amazon EC2 Auto Scaling 操作，警报会在警报保持新状态的每个时间段中继续调用操作。对于 Amazon SNS 通知，不会调用额外操作。
![](/assets/2019-02-22_120242.png)

创建警报
![](/assets/2019-02-22_120418.png)